<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обучение Фишингу. Часть 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            padding: 2.6rem;
            border-radius: 1.3rem;
            box-shadow: 0 13px 26px rgba(0,0,0,0.26);
            max-width: 90%;
            width: 520px;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        .modal-input {
            width: 100%;
            padding: 0.975rem;
            border-radius: 0.65rem;
            border: 1px solid #d1d5db;
            margin-top: 1.3rem;
            margin-bottom: 1.95rem;
            outline: none;
            transition: border-color 0.2s;
        }
        .modal-input:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <!-- Главный контейнер игры -->
    <div id="game-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center text-center" style="transform: scale(1.6); transform-origin: center;">

        <!-- Главный экран -->
        <div id="start-screen" class="space-y-6 transition-opacity duration-500 ease-in-out">
            <h1 class="text-4xl font-bold text-slate-800 mb-4">Осторожно, фишинг! Часть 2.</h1>
            <p class="text-lg text-slate-600">
                Узнай, как отличить обман в сети. Проверь себя, будь внимателен!
            </p>
            <button id="start-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Начать
            </button>
        </div>

        <!-- Игровой экран -->
        <div id="game-screen" class="hidden w-full space-y-6 text-left transition-opacity duration-500 ease-in-out">
            <!-- Прогресс и счет -->
            <div class="flex justify-between items-center mb-4 text-slate-500 text-sm font-medium">
                <span id="progress-text">Сценарий 1/21</span>
                <span id="score-text">Очки: 0</span>
            </div>

            <!-- Карточка сценария -->
            <div id="scenario-card" class="bg-gray-100 rounded-xl p-6 shadow-inner border-l-4 border-l-indigo-500 flex flex-col space-y-4">
                <h2 id="scenario-title" class="text-2xl font-semibold text-slate-700"></h2>
                <p id="scenario-text" class="text-slate-600 leading-relaxed"></p>
            </div>

            <!-- Варианты ответов -->
            <div id="choices-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                <!-- Кнопки будут добавлены здесь с помощью JS -->
            </div>
        </div>

        <!-- Имитация всплывающего окна -->
        <div id="popup-modal" class="modal-overlay">
            <div class="modal-content text-center">
                <h2 id="popup-title" class="text-xl font-bold mb-4"></h2>
                <p id="popup-text" class="text-slate-600 mb-6"></p>
                <input type="email" id="email-input" class="modal-input" placeholder="Введите свой email">
                <div id="popup-choices" class="flex justify-around space-x-4">
                    <button id="ok-btn" class="bg-red-500 text-white font-bold py-2 px-6 rounded-full hover:bg-red-600 transition-colors">Установить</button>
                    <button id="cancel-btn" class="bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-full hover:bg-gray-500 transition-colors">Отмена</button>
                </div>
            </div>
        </div>

        <!-- Экран обратной связи -->
        <div id="feedback-screen" class="hidden text-center space-y-4 transition-opacity duration-500 ease-in-out">
            <div id="feedback-icon" class="text-6xl mb-4"></div>
            <h2 id="feedback-title" class="text-3xl font-bold mb-2"></h2>
            <p id="feedback-explanation" class="text-slate-600 leading-relaxed"></p>
            <button id="next-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Далее
            </button>
        </div>

        <!-- Экран результатов -->
        <div id="results-screen" class="hidden text-center space-y-6 transition-opacity duration-500 ease-in-out">
            <h2 class="text-4xl font-bold text-slate-800">Завершено</h2>
            <div id="final-score" class="text-2xl text-slate-700 font-semibold"></div>
            <p id="results-message" class="text-lg text-slate-600"></p>
            <button id="restart-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Начать заново
            </button>
        </div>

    </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      // --- SCENARIO DATA ---
      const scenarios = [
        {
          id: 1,
          title: "Тайное письмо",
          text: "Ты получаешь сообщение: 'Привет! Чтобы получить много подарков, отправь мне свой пароль от игры! Это секрет!'.",
          choices: [
            { text: "Ответить и сказать пароль", isCorrect: false },
            { text: "Показать это письмо родителям", isCorrect: true },
            { text: "Удалить письмо и не отвечать", isCorrect: true }
          ],
          explanation: "Никогда никому не сообщай свои пароли, даже если это кажется очень интересным! Это может быть ловушка, цель которой — украсть твои данные."
        },
        {
          id: 2,
          title: "Друг просит о помощи?",
          text: "В социальной сети от знакомого приходит сообщение: 'Смотри, какой классный сайт! Тут можно получить бесплатные монетки для игры! Жми скорее: <a href='#' class='text-blue-500 underline'>монетки-бесплатно.бел</a>'.",
          choices: [
            { text: "Спросить друга по телефону, отправлял ли он это", isCorrect: true },
            { text: "Сразу перейти по ссылке, ведь это же друг!", isCorrect: false }
          ],
          explanation: "Это может быть не твой друг! Его аккаунт могли взломать. Никогда не переходи по подозрительным ссылкам, даже если они присланы знакомыми."
        },
        {
          id: 3,
          title: "Большой сюрприз!",
          text: "Всплывает окно: 'Поздравляем! Ты выиграл новый планшет! Чтобы его получить, нажми 'ОК' и введи свой адрес.'.",
          choices: [
            { text: "Нажать 'ОК' и заполнить анкету", isCorrect: false },
            { text: "Сразу закрыть страницу", isCorrect: true }
          ],
          explanation: "Такой 'сюрприз' — это обман. Просто закрой это окно и не нажимай ничего. Если что-то кажется слишком хорошим, чтобы быть правдой — это, скорее всего, ловушка."
        },
        {
          id: 4,
          title: "«Отмена покупки в магазине приложений»",
          text: "Приходит СМС: 'Ваше устройство оформило платную подписку “Premium Stickers” за $9.99/мес. Если это не вы — отмените по ссылке: <a href='#' class='text-blue-500 underline'>appstore-billing-help.com</a>'.",
          choices: [
            { text: "Сразу перейти по ссылке и ввести данные карты, чтобы отменить", isCorrect: false },
            { text: "Открыть магазин приложений вручную (через приложение/настройки) и проверить там подписки", isCorrect: true },
            { text: "Попросить взрослых помочь и не переходить по ссылкам из СМС", isCorrect: true }
          ],
          explanation: "Ссылки «для отмены платежа» часто фальшивые. Настоящие подписки управляются только в настройках магазина приложений."
        },
        {
          id: 5,
          title: "Окно про вирус",
          text: "На экране появляется окно: 'Тревога! На твоем компьютере много вирусов! Нажми 'Проверить' прямо сейчас, чтобы их убрать!'.",
          choices: [
            { text: "Нажать 'Проверить' и установить программу", isCorrect: false },
            { text: "Сразу закрыть вкладку браузера", isCorrect: true }
          ],
          explanation: "Это фальшивая тревога, чтобы заставить тебя установить вредоносную программу. Не верь таким предупреждениям! Просто закрой окно."
        },
        {
          id: 6,
          title: "Новый любимый блогер",
          text: "Ты видишь сообщение от имени известного блогера: 'Я нашел секретный способ получить все скины в игре бесплатно. Перейди по ссылке в описании.'.",
          choices: [
            { text: "Попробовать, ведь это же мой блогер!", isCorrect: false },
            { text: "Проверить, есть ли эта информация на официальном канале блогера", isCorrect: true }
          ],
          explanation: "Мошенники часто выдают себя за популярных людей. Всегда проверяй информацию на официальных источниках, прежде чем переходить по ссылкам."
        },
        {
          id: 7,
          title: "Письмо с новым приложением",
          text: "Ты получаешь письмо: 'Твое приложение устарело! Пожалуйста, обнови его, нажав на эту кнопку: <a href='#' class='text-blue-500 underline'>download-now.com</a>'.",
          choices: [
            { text: "Нажать на кнопку, чтобы обновить приложение", isCorrect: false },
            { text: "Проверить обновление в официальном магазине приложений", isCorrect: true }
          ],
          explanation: "Обновления всегда приходят только через официальные магазины. Никогда не нажимай на кнопки в подозрительных письмах."
        },
        {
          id: 8,
          title: "Сайт с любимыми мультфильмами",
          text: "Ты зашёл на сайт, где можно смотреть все мультфильмы бесплатно. Тебе предлагают 'ввести свой номер телефона, и мы пришлем тебе код'.",
          choices: [
            { text: "Ввести свой номер телефона", isCorrect: false },
            { text: "Закрыть страницу", isCorrect: true },
            { text: "Сообщить родителям о подозрительном сайте", isCorrect: true }
          ],
          explanation: "Никогда не вводи свой номер телефона на незнакомых сайтах! Это может привести к платным подпискам или спаму."
        },
        {
          id: 9,
          title: "Клон любимой игры",
          text: "Ты ищешь 'Roblox'. В поиске находишь сайт: 'Это официальный сайт Roblox! Введи свой пароль, чтобы играть: <a href='#' class='text-blue-500 underline'>roblox-online.net</a>'.",
          choices: [
            { text: "Ввести свой пароль, ведь название выглядит похожим", isCorrect: false },
            { text: "Внимательно проверить адрес сайта", isCorrect: true }
          ],
          explanation: "Мошенники часто создают сайты, похожие на настоящие, меняя одну букву или цифру в адресе. Всегда внимательно проверяй адресную строку, прежде чем вводить личные данные."
        },
        {
          id: 10,
          title: "Подарки за опрос",
          text: "Ты получаешь сообщение: 'Пройди короткий опрос и получи 1000 гемов в игре! Это правда!'.",
          choices: [
            { text: "Пройти опрос и ждать гемы", isCorrect: false },
            { text: "Игнорировать сообщение", isCorrect: true }
          ],
          explanation: "В интернете редко дают что-то просто так. Это способ обманом получить твои данные или заставить подписаться на платную рассылку."
        },
        {
          id: 11,
          title: "Срочное сообщение от 'модератора'",
          text: "Тебе приходит сообщение: 'Мы заблокировали твой аккаунт за нарушение правил. Чтобы его разблокировать, перейди по ссылке: <a href='#' class='text-blue-500 underline'>support-account-help.net</a>'.",
          choices: [
            { text: "Перейти по ссылке и ввести данные", isCorrect: false },
            { text: "Открыть официальное приложение/сайт и проверить статус аккаунта", isCorrect: true }
          ],
          explanation: "Официальные модераторы не будут просить тебя переходить по ссылкам для разблокировки. В случае проблем, зайди в свой аккаунт напрямую, а не через подозрительную ссылку."
        },
        {
          id: 12,
          title: "Предложение 'помощника' в игре",
          text: "Тебе пишет игрок: 'Я крутой игрок! Могу прокачать твой аккаунт до 100 уровня! Просто дай мне свой пароль, и я все сделаю!'.",
          choices: [
            { text: "Дать пароль, ведь он обещает помочь", isCorrect: false },
            { text: "Не давать пароль и заблокировать игрока", isCorrect: true }
          ],
          explanation: "Никогда никому не сообщай свои пароли! Никто не может помочь тебе, если не знает твой пароль. Это обман."
        },
        {
          id: 13,
          title: "СМС о подарке",
          text: "Ты получаешь СМС: 'Поздравляем, ты получил подарок! Чтобы его получить, отправь нам СМС с кодом.'.",
          choices: [
            { text: "Отправить СМС с кодом", isCorrect: false },
            { text: "Проверить отправителя и не отвечать", isCorrect: true },
            { text: "Сообщить родителям", isCorrect: true }
          ],
          explanation: "Отправка таких СМС может стоить очень дорого, а никакого подарка ты не получишь. Не отвечай на подозрительные сообщения."
        },
        {
          id: 14,
          title: "Письмо от 'банка'",
          text: "Тебе звонят от 'сотрудника банка': 'Внимание! С твоего счета пытались украсть деньги. Чтобы отменить операцию, назови нам номер твоей карты и код на обратной стороне.'.",
          choices: [
            { text: "Сообщить им данные карты", isCorrect: false },
            { text: "Повесить трубку и рассказать родителям", isCorrect: true }
          ],
          explanation: "Сотрудники банка никогда не будут просить у тебя данные карты по телефону! Это мошенники. Сразу положи трубку и сообщи об этом взрослым."
        },
        {
          id: 15,
          title: "Друг просит деньги",
          text: "В мессенджере от знакомого приходит сообщение: 'Привет! Я потерял кошелек. Можешь перевести мне 100 рублей на карту?'.",
          choices: [
            { text: "Сразу перевести деньги", isCorrect: false },
            { text: "Спросить у друга лично, что случилось", isCorrect: true },
            { text: "Позвонить ему по телефону и убедиться, что это действительно он", isCorrect: true }
          ],
          explanation: "Это может быть не твой друг! Его аккаунт могли взломать. Всегда связывайся с человеком по-настоящему, если он просит деньги."
        },
        {
          id: 16,
          title: "Ссылка на конкурс",
          text: "Ты видишь рекламу в социальной сети: 'Участвуй в нашем конкурсе и выиграй новый компьютер! Зарегистрируйся по ссылке: <a href='#' class='text-blue-500 underline'>mega-konkurs-pobeda.com</a>'.",
          choices: [
            { text: "Пройти регистрацию", isCorrect: false },
            { text: "Проверить, кто является организатором конкурса", isCorrect: true }
          ],
          explanation: "Прежде чем участвовать в конкурсах, всегда проверяй, кто их проводит. Официальные компании обычно размещают информацию на своих официальных сайтах."
        },
        {
          id: 17,
          title: "«Бонус от любимого блогера»",
          text: "Тебе приходит письмо: 'Привет! Это команда твоего любимого блогера. Он дарит тебе подарок — 1000 монет для игры! Получи их по ссылке: <a href='#' class='text-blue-500 underline'>bonus-from-blogger.com</a>'. Логотип похож на настоящий, и стоит имя блогера.",
          choices: [
            { text: "Перейти по ссылке и войти в свой аккаунт", isCorrect: false },
            { text: "Проверить, писал ли блогер об этом в своём официальном канале/странице", isCorrect: true },
            { text: "Показать письмо взрослым и не вводить никаких данных", isCorrect: true }
          ],
          explanation: "Мошенники часто используют имена популярных блогеров, чтобы завлечь детей. Настоящие подарки блогеры раздают только через свои официальные каналы и страницы."
        },
        {
          id: 18,
          title: "Вакансия 'тайного покупателя'",
          text: "Тебе предлагают 'тайную работу': 'Стань тайным покупателем, чтобы проверять магазины. Получай 2000 рублей в час! Чтобы начать, нам нужен твой номер карты и номер паспорта.'.",
          choices: [
            { text: "Отправить данные, ведь это легкие деньги", isCorrect: false },
            { text: "Проигнорировать и заблокировать отправителя", isCorrect: true }
          ],
          explanation: "Серьезные компании никогда не будут просить личные данные через СМС или в интернете. Это мошенничество."
        },
        {
          id: 19,
          title: "Фальшивая служба доставки",
          text: "Ты получаешь СМС: 'Твой заказ не может быть доставлен. Для уточнения адреса перейди по ссылке: <a href='#' class='text-blue-500 underline'>dostavka-sdek.by</a>'.",
          choices: [
            { text: "Перейти по ссылке", isCorrect: false },
            { text: "Проверить статус заказа в официальном приложении или на сайте службы", isCorrect: true }
          ],
          explanation: "Если ты ничего не заказывал, это обман. Даже если заказывал, всегда лучше проверять статус заказа на официальном сайте, а не по подозрительной ссылке."
        },
        {
          id: 20,
          title: "Обещание 'взломать' игру",
          text: "Тебе пишет незнакомец: 'Я могу взломать любую игру и дать тебе бесконечные жизни и гемы. Просто введи свой пароль на сайте: <a href='#' class='text-blue-500 underline'>super-hack-games.com</a>'.",
          choices: [
            { text: "Ввести пароль, чтобы получить все бонусы", isCorrect: false },
            { text: "Сообщить об этом администрации игры и заблокировать пользователя", isCorrect: true }
          ],
          explanation: "Нет честного способа 'взломать' игру, чтобы получить бонусы. Это обман, который приведет к потере твоего аккаунта."
        },
        {
          id: 21,
          title: "Бесплатные робуксы/в-баксы",
          text: "Тебе присылают: 'Дарим 5 000 робуксов за опрос! Перейди по ссылке и войди в аккаунт: <a href='#' class='text-blue-500 underline'>free-robux.gift</a>'.",
          choices: [
            { text: "Перейти по ссылке и войти", isCorrect: false },
            { text: "Проигнорировать, рассказать взрослым", isCorrect: true },
            { text: "Проверить акции только в официальном магазине/приложении", isCorrect: true }
          ],
          explanation: "Обещания бесплатной валюты — частая уловка. По таким ссылкам воруют пароли. Акции проверяй только в официальных местах."
        },
        {
          id: 22,
          title: "«Администратор игры» просит пароль",
          text: "В личные сообщения пишет 'админ': 'У нас проверка. Срочно напиши свой пароль, иначе тебя заблокируем.'",
          choices: [
            { text: "Сообщить пароль, чтобы не заблокировали", isCorrect: false },
            { text: "Никому не говорить пароли и пожаловаться на пользователя", isCorrect: true }
          ],
          explanation: "Админы никогда не просят пароли. Это мошенник, который пытается украсть аккаунт."
        },
        {
          id: 23,
          title: "Письмо от «школы» про домашнее задание",
          text: "Приходит письмо: 'Новый дневник! Войдите здесь: <a href='#' class='text-blue-500 underline'>dnevnik-school.work</a> и введите пароль от почты'.",
          choices: [
            { text: "Сразу авторизоваться по ссылке из письма", isCorrect: false },
            { text: "Проверить задание в официальном дневнике или спросить учителя/родителей", isCorrect: true }
          ],
          explanation: "Поддельные сайты маскируются под школьные. Всегда заходи только через знакомый официальный сайт или приложение."
        },
        {
          id: 24,
          title: "«Вы выиграли смартфон!»",
          text: "Сообщение: 'Поздравляем! Вы выиграли телефон. Оплатите комиссию 100 рублей по ссылке: <a href='#' class='text-blue-500 underline'>prize-phone.win</a>'.",
          choices: [
            { text: "Оплатить маленькую комиссию и получить приз", isCorrect: false },
            { text: "Удалить сообщение и рассказать взрослым", isCorrect: true }
          ],
          explanation: "Никакие выигрыши не требуют платы «за доставку». Это уловка, чтобы забрать деньги."
        },
        {
          id: 25,
          title: "Странное сообщение от друга с ссылкой",
          text: "От друга приходит: 'Смотри, дарю тебе премиум! <a href='#' class='text-blue-500 underline'>gift-roblox-now.cc</a>'. Пишет как-то не по-обычному.",
          choices: [
            { text: "Перейти по ссылке — вдруг правда подарок", isCorrect: false },
            { text: "Связаться с другом другим способом и уточнить", isCorrect: true },
            { text: "Пожаловаться в поддержку — возможно, его взломали", isCorrect: true }
          ],
          explanation: "Когда сообщение «не похоже» на друга, аккаунт могли взломать. Не переходи по ссылкам и проверь у друга."
        },
        {
          id: 26,
          title: "«Проверка возраста» через уведомления",
          text: "На сайте с мультиками появляется окно: 'Чтобы продолжить и доказать, что тебе есть 7 лет, нажми «Разрешить уведомления»'. После нажатия браузер просит дать сайту разрешение на уведомления.",
          choices: [
            { text: "Нажать «Разрешить», иначе сайт не пустит дальше", isCorrect: false },
            { text: "Закрыть вкладку и ничего не разрешать; смотреть мультики только на знакомых платформах", isCorrect: true }
          ],
          explanation: "Сайту не нужны уведомления для проверки возраста. Так тебя подписывают на навязчивые рассылки и могут прислать фишинговые ссылки. Не выдавай лишние разрешения незнакомым сайтам."
        },
        {
          id: 27,
          title: "Чит-расширение для игры",
          text: "Сайт предлагает расширение с 'бесконечными монетами', но просит «доступ ко всем данным на сайтах».",
          choices: [
            { text: "Установить — ведь так будет легче играть", isCorrect: false },
            { text: "Не устанавливать и пользоваться только разрешёнными модами с одобрения родителей", isCorrect: true }
          ],
          explanation: "Читы часто крадут данные. Расширения с лишними правами опасны."
        },
        {
          id: 28,
          title: "Поддельная «раздача призов» на стриме",
          text: "На стриме пишут: 'Получишь подарок, если войдёшь через <a href='#' class='text-blue-500 underline'>youtube-gifts.win</a>'.",
          choices: [
            { text: "Войти через ссылку ради подарка", isCorrect: false },
            { text: "Не логиниться на сторонних сайтах и проверить информацию на официальных страницах канала", isCorrect: true },
            { text: "Сообщить модераторам о подозрительной ссылке", isCorrect: true }
          ],
          explanation: "Мошенники подделывают раздачи. Переход по таким ссылкам — риск потерять аккаунт."
        },
        {
          id: 29,
          title: "Бесплатный Wi-Fi просит пароль от почты",
          text: "В общественном Wi-Fi появляется страница, где просят логин и пароль от твоей почты.",
          choices: [
            { text: "Ввести почту и пароль — иначе интернет не включится", isCorrect: false },
            { text: "Не вводить пароли в чужом Wi-Fi и посоветоваться с взрослыми", isCorrect: true }
          ],
          explanation: "Настоящим Wi-Fi не нужен пароль от твоей почты. Это ловушка, чтобы украсть данные."
        },
        {
          id: 30,
          title: "«Я мама твоего друга, пришли код»",
          text: "Пишут: 'Я мама твоего друга, мне пришёл код на твой телефон. Срочно пришли его, чтобы попасть в чат.'",
          choices: [
            { text: "Отправить код — взрослым можно доверять", isCorrect: false },
            { text: "Никому не говорить коды и позвонить другу/родителям", isCorrect: true }
          ],
          explanation: "Коды из СМС/приложений — секрет. Их используют, чтобы украсть аккаунты."
        },
        {
          id: 31,
          title: "Лже-техподдержка по телефону",
          text: "Звонок: 'Мы из поддержки. Установите программу удалённого доступа — сейчас починим ваш компьютер.'",
          choices: [
            { text: "Установить программу — вдруг помогут", isCorrect: false },
            { text: "Прекратить разговор, ничего не устанавливать и рассказать взрослым", isCorrect: true }
          ],
          explanation: "Настоящая поддержка не просит ставить неизвестные программы по звонку. Это опасно."
        },
        {
          id: 32,
          title: "Файл-приманка «фото»",
          text: "Незнакомец присылает файл 'photo.jpg.exe' и просит открыть.",
          choices: [
            { text: "Открыть — вдруг это смешная картинка", isCorrect: false },
            { text: "Не открывать, удалить и проверить устройством на вирусы", isCorrect: true }
          ],
          explanation: "Файлы с двойным расширением — частая маскировка вирусов."
        },
        {
          id: 33,
          title: "QR-код с призами",
          text: "На плакате в школе QR-код: 'Сканируй и получай призы: <a href='#' class='text-blue-500 underline'>win-prize-qr.fun</a>'.",
          choices: [
            { text: "Сканировать и ввести свои данные", isCorrect: false },
            { text: "Не сканировать без родителей; если просканировал — ничего не вводить", isCorrect: true }
          ],
          explanation: "QR-коды могут вести на опасные сайты. Ничего не вводи без проверки взрослыми."
        },
        {
          id: 34,
          title: "Сбор денег «на лечение» через сторис",
          text: "В сторис просят срочно перевести деньги по ссылке: <a href='#' class='text-blue-500 underline'>donate-help-kid.live</a>.",
          choices: [
            { text: "Сразу отправить деньги из жалости", isCorrect: false },
            { text: "Обсудить с родителями и проверять только официальные фонды", isCorrect: true }
          ],
          explanation: "Мошенники притворяются благотворителями. Переводы делай только после проверки взрослыми."
        },
        {
          id: 35,
          title: "Письмо «Подтвердите вход»",
          text: "Письмо: 'Кто-то вошёл в ваш аккаунт. Если это не вы, нажмите «Отменить» — <a href='#' class='text-blue-500 underline'>mail-security-cancel.com</a>'.",
          choices: [
            { text: "Нажать ссылку из письма", isCorrect: false },
            { text: "Открыть приложение/официальный сайт вручную и сменить пароль при необходимости", isCorrect: true }
          ],
          explanation: "Ссылки «для безопасности» могут быть фальшивыми. Заходи только напрямую, не из письма."
        },
        {
          id: 36,
          title: "Угроза в чате «заплати или всем расскажу»",
          text: "Кто-то пишет: 'Заплати мне, иначе я разошлю всем неприятные вещи про тебя.'",
          choices: [
            { text: "Заплатить, чтобы отстал", isCorrect: false },
            { text: "Не платить, сохранить переписку, рассказать взрослым и пожаловаться в сервис", isCorrect: true }
          ],
          explanation: "Это шантаж. Не плати и не отвечай. Попроси помощи у взрослых и сообщи в поддержку."
        },
        {
          id: 37,
          title: "Обмен скинов вне платформы",
          text: "Игрок пишет: 'Дам редкий скин, перейди на сайт <a href='#' class='text-blue-500 underline'>steam-trade-free.io</a> и введи данные.'",
          choices: [
            { text: "Согласиться и зайти на внешний сайт", isCorrect: false },
            { text: "Использовать только официальный обмен внутри игры/платформы", isCorrect: true }
          ],
          explanation: "Обмен вне официальной площадки — риск кражи. Никогда не вводи логины на посторонних сайтах."
        },
        {
          id: 38,
          title: "«Банк родителей» просит данные",
          text: "Сообщение: 'На карте вашей мамы подозрительная операция. Подтвердите, введя номер карты и CVC: <a href='#' class='text-blue-500 underline'>bank-safe-check.kz</a>'.",
          choices: [
            { text: "Ввести данные карты родителей", isCorrect: false },
            { text: "Ничего не вводить и сразу сказать родителям", isCorrect: true }
          ],
          explanation: "Банки не просят полные данные через ссылки. Всегда сообщай об этом взрослым."
        },
        {
          id: 39,
          title: "Очень похожий адрес сайта",
          text: "Ты видишь сайт 'tg-contacts.com' и хочешь войти, думая, что это Телеграм.",
          choices: [
            { text: "Войти — адрес почти такой же", isCorrect: false },
            { text: "Проверить адрес и заходить только через закладки или официальное приложение", isCorrect: true }
          ],
          explanation: "Поддельные адреса отличаются одной-двумя буквами. Всегда перепроверяй адрес."
        },
        {
          id: 40,
          title: "Доступ к «учебнику» в облаке",
          text: "Пришла ссылка на «учебник»: <a href='#' class='text-blue-500 underline'>cloud-classroom.co</a>. Сайт просит логин и пароль от твоей почты.",
          choices: [
            { text: "Ввести логин и пароль, чтобы скачать файл", isCorrect: false },
            { text: "Спросить учителя/родителей и открывать материалы только через официальный дневник или школьный портал", isCorrect: true }
          ],
          explanation: "Подделывают и «облака». Не вводи пароли на незнакомых сайтах — сначала проверь у взрослых и учителя."
        },
        {
          id: 41,
          title: "Поздравляем!",
          text: "Твой компьютер под угрозой! Чтобы получить 'бесплатный антивирус', тебе нужно ввести свой электронный адрес.",
          choices: [
            { text: "Установить антивирус", isPopup: true }
          ],
          explanation: "Это классическая уловка. Мошенники пытаются получить твои данные, предлагая 'бесплатный' или 'срочный' антивирус."
        }
      ];

      // --- HTML ЭЛЕМЕНТЫ ---
            const startScreen = document.getElementById('start-screen');
            const gameScreen = document.getElementById('game-screen');
            const feedbackScreen = document.getElementById('feedback-screen');
            const resultsScreen = document.getElementById('results-screen');
            
            const startBtn = document.getElementById('start-btn');
            const nextBtn = document.getElementById('next-btn');
            const restartBtn = document.getElementById('restart-btn');
            
            const popupModal = document.getElementById('popup-modal');
            const okBtn = document.getElementById('ok-btn');
            const cancelBtn = document.getElementById('cancel-btn');
            const popupTitle = document.getElementById('popup-title');
            const popupText = document.getElementById('popup-text');
            const emailInput = document.getElementById('email-input');

            const progressText = document.getElementById('progress-text');
            const scoreText = document.getElementById('score-text');
            const scenarioTitle = document.getElementById('scenario-title');
            const scenarioText = document.getElementById('scenario-text');
            const choicesContainer = document.getElementById('choices-container');
            
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackExplanation = document.getElementById('feedback-explanation');
            const feedbackIcon = document.getElementById('feedback-icon');

            const finalScore = document.getElementById('final-score');
            const resultsMessage = document.getElementById('results-message');

            // --- СОСТОЯНИЕ ИГРЫ ---
            let currentScenarioIndex = 0;
            let score = 0;
            const totalScenarios = scenarios.length;

            // --- ФУНКЦИИ ---
            function showScreen(screen) {
                // Скрываем все экраны
                const allScreens = [startScreen, gameScreen, feedbackScreen, resultsScreen];
                allScreens.forEach(s => s.classList.add('hidden'));
                popupModal.classList.remove('active');
                
                // Показываем нужный
                if (screen === popupModal) {
                    popupModal.classList.add('active');
                } else {
                    screen.classList.remove('hidden');
                }
            }

            function startGame() {
                currentScenarioIndex = 0;
                score = 0;
                renderScenario();
            }

            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            function renderScenario() {
                if (currentScenarioIndex >= totalScenarios) {
                    showResults();
                    return;
                }

                const scenario = scenarios[currentScenarioIndex];
                
                progressText.textContent = `Сценарий ${currentScenarioIndex + 1}/${totalScenarios}`;
                scoreText.textContent = `Очки: ${score}`;
                scenarioTitle.textContent = scenario.title;
                scenarioText.innerHTML = scenario.text;
                
                choicesContainer.innerHTML = '';
                
                const shuffledChoices = shuffle([...scenario.choices]);

                shuffledChoices.forEach(choice => {
                    const button = document.createElement('button');
                    button.textContent = choice.text;
                    button.className = 'bg-indigo-200 text-indigo-800 font-medium py-3 px-6 rounded-lg shadow-md hover:bg-indigo-300 transition-colors duration-200 text-sm md:text-base';
                    
                    if (choice.isPopup) {
                        button.onclick = () => showPopup(scenario.id);
                    } else {
                        button.onclick = () => handleChoice(choice.isCorrect, scenario.explanation);
                    }
                    choicesContainer.appendChild(button);
                });
                showScreen(gameScreen);
            }

            function showPopup(scenarioId) {
                // Логика для конкретного всплывающего окна
                if (scenarioId === 41) {
                    popupTitle.textContent = "Важное уведомление!";
                    popupText.textContent = "Чтобы установить 'антивирус', введи свой email:";
                    emailInput.value = '';
                    showScreen(popupModal);
                }
            }

            function handleChoice(isCorrect, explanation) {
                if (isCorrect) {
                    score++;
                    feedbackTitle.textContent = "Правильно!";
                    feedbackIcon.textContent = "👍";
                } else {
                    feedbackTitle.textContent = "Неправильно!";
                    feedbackIcon.textContent = "👎";
                }
                
                feedbackExplanation.textContent = explanation;
                showScreen(feedbackScreen);
            }

            function nextScenario() {
                currentScenarioIndex++;
                renderScenario();
            }

            function showResults() {
                finalScore.textContent = `Твой результат: ${score} из ${totalScenarios}`;
                if (score > totalScenarios * 0.8) {
                    resultsMessage.textContent = "Отличная работа! Ты настоящий эксперт по безопасности в интернете.";
                } else if (score > totalScenarios * 0.5) {
                    resultsMessage.textContent = "Хороший результат! Ты знаешь, как быть в безопасности, но еще есть, что улучшить.";
                } else {
                    resultsMessage.textContent = "Не расстраивайся! Продолжай учиться, и ты станешь более защищенным.";
                }
                showScreen(resultsScreen);
            }

            // --- ОБРАБОТЧИКИ СОБЫТИЙ ---
            startBtn.addEventListener('click', startGame);
            nextBtn.addEventListener('click', nextScenario);
            restartBtn.addEventListener('click', startGame);

            // Обработчики кнопок всплывающего окна
            okBtn.addEventListener('click', () => {
                const explanation = scenarios[currentScenarioIndex].explanation;
                handleChoice(false, explanation);
            });

            cancelBtn.addEventListener('click', () => {
                const explanation = scenarios[currentScenarioIndex].explanation;
                handleChoice(true, explanation);
            });
        });
    </script>

</body>
</html>
