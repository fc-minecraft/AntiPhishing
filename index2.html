<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обучение Фишингу</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            padding: 2.6rem;
            border-radius: 1.3rem;
            box-shadow: 0 13px 26px rgba(0,0,0,0.26);
            max-width: 90%;
            width: 520px;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        .modal-input {
            width: 100%;
            padding: 0.975rem;
            border-radius: 0.65rem;
            border: 1px solid #d1d5db;
            margin-top: 1.3rem;
            margin-bottom: 1.95rem;
            outline: none;
            transition: border-color 0.2s;
        }
        .modal-input:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <!-- Главный контейнер игры -->
    <div id="game-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center text-center" style="transform: scale(1.6); transform-origin: center;">

        <!-- Главный экран -->
        <div id="start-screen" class="space-y-6 transition-opacity duration-500 ease-in-out">
            <h1 class="text-4xl font-bold text-slate-800 mb-4">Осторожно, фишинг! Часть 1.</h1>
            <p class="text-lg text-slate-600">
                Узнай, как отличить обман в сети. Проверь себя, будь внимателен!
            </p>
            <button id="start-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Начать
            </button>
        </div>

        <!-- Игровой экран -->
        <div id="game-screen" class="hidden w-full space-y-6 text-left transition-opacity duration-500 ease-in-out">
            <!-- Прогресс и счет -->
            <div class="flex justify-between items-center mb-4 text-slate-500 text-sm font-medium">
                <span id="progress-text">Сценарий 1/21</span>
                <span id="score-text">Очки: 0</span>
            </div>

            <!-- Карточка сценария -->
            <div id="scenario-card" class="bg-gray-100 rounded-xl p-6 shadow-inner border-l-4 border-l-indigo-500 flex flex-col space-y-4">
                <h2 id="scenario-title" class="text-2xl font-semibold text-slate-700"></h2>
                <p id="scenario-text" class="text-slate-600 leading-relaxed"></p>
            </div>

            <!-- Варианты ответов -->
            <div id="choices-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                <!-- Кнопки будут добавлены здесь с помощью JS -->
            </div>
        </div>

        <!-- Имитация всплывающего окна -->
        <div id="popup-modal" class="modal-overlay">
            <div class="modal-content text-center">
                <h2 id="popup-title" class="text-xl font-bold mb-4"></h2>
                <p id="popup-text" class="text-slate-600 mb-6"></p>
                <input type="email" id="email-input" class="modal-input" placeholder="Введите свой email">
                <div id="popup-choices" class="flex justify-around space-x-4">
                    <button id="ok-btn" class="bg-red-500 text-white font-bold py-2 px-6 rounded-full hover:bg-red-600 transition-colors">Установить</button>
                    <button id="cancel-btn" class="bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-full hover:bg-gray-500 transition-colors">Отмена</button>
                </div>
            </div>
        </div>

        <!-- Экран обратной связи -->
        <div id="feedback-screen" class="hidden text-center space-y-4 transition-opacity duration-500 ease-in-out">
            <div id="feedback-icon" class="text-6xl mb-4"></div>
            <h2 id="feedback-title" class="text-3xl font-bold mb-2"></h2>
            <p id="feedback-explanation" class="text-slate-600 leading-relaxed"></p>
            <button id="next-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Далее
            </button>
        </div>

        <!-- Экран результатов -->
        <div id="results-screen" class="hidden text-center space-y-6 transition-opacity duration-500 ease-in-out">
            <h2 class="text-4xl font-bold text-slate-800">Завершено</h2>
            <div id="final-score" class="text-2xl text-slate-700 font-semibold"></div>
            <p id="results-message" class="text-lg text-slate-600"></p>
            <button id="restart-btn" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition-colors duration-200">
                Начать заново
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- SCENARIO DATA ---
            const scenarios = [
                {
                    title: "Подозрительная ссылка",
                    text: "Ты знаешь, что адрес сайта Roblox — <strong>roblox.com</strong>. Друг просит тебя перейти на <strong>my-roblox-online.xyz</strong> и добавить его в друзья. Ты переходишь и видишь окно входа. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Верно! Официальный сайт — <strong>roblox.com</strong>. Сайт с подозрительным адресом <strong>my-roblox-online.xyz</strong> — это фишинг. Никогда не вводи свои данные на таких сайтах.",
                    type: "choice"
                },
                {
                    title: "Проверка адреса",
                    text: "Тебе скинули ссылку на игру Roblox: <strong>https://www.roblox.com/games/75963928975799/BEST-GAME</strong>. Ты переходишь и видишь страницу игры. Что ты будешь делать?",
                    isPhishing: false,
                    explanation: "Правильно! Ты заметил, что адрес начинается с <strong>roblox.com</strong>. Это настоящий сайт. Все, что идет после <strong>.com/</strong> просто ведет на другую страницу внутри сайта.",
                    type: "choice"
                },
                {
                    title: "Бесплатный скин",
                    text: "Тебе пришло сообщение от 'Minecraft' с предложением получить бесплатный скин. Ссылка: <strong>free-minecraft-skins.xyz</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Это фишинг. Настоящий сайт Minecraft — <strong>minecraft.net</strong>. Любой другой адрес, предлагающий 'бесплатные' вещи, — это уловка.",
                    type: "choice"
                },
                {
                    title: "Опечатка в адресе",
                    text: "Тебе прислали ссылку от друга, чтобы посмотреть видео с котиками. Ссылка: <strong>www.tiktok.com/cat-videos</strong>. Но ты замечаешь, что адрес выглядит как <strong>ticcktok.com</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Это фишинг. В адресе сайта есть опечатка: 'ticcktok' вместо 'tiktok'. Мошенники специально так делают, чтобы обмануть тебя.",
                    type: "choice"
                },
                {
                    title: "Переход по ссылке",
                    text: "Ты ищешь в Google 'YouTube' и переходишь по первой ссылке: <strong>youtube.com</strong>. Что ты будешь делать?",
                    isPhishing: false,
                    explanation: "Это безопасно. Это настоящий сайт YouTube, ты можешь смело заходить.",
                    type: "choice"
                },
                {
                    title: "Сообщение от 'Gmail'",
                    text: "Ты получаешь сообщение от 'Gmail' с просьбой обновить настройки безопасности. Ссылка: <strong>google-security-update.online/settings</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Настоящий сайт Google — <strong>google.com</strong>. Домен <strong>google-security-update.online</strong> не имеет к нему никакого отношения, это подделка.",
                    type: "choice"
                },
                {
                    title: "Всплывающее окно",
                    text: "Ты видишь всплывающее окно на сайте, где говорится: 'Твой компьютер заражен! Скачай этот антивирус бесплатно: <strong>secure-scan.com/download</strong>'. Это всплывающее окно. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Это типичная ловушка. Никакие сайты не могут 'сканировать' твой компьютер. Они просто пытаются заставить тебя скачать вирус.",
                    type: "popup",
                    popupTitle: "Предупреждение!",
                    popupText: "Твой компьютер заражен! Скачай этот антивирус бесплатно."
                },
                {
                    title: "Настоящий адрес",
                    text: "Тебе пришло письмо от 'Apple' о том, что твой аккаунт временно заблокирован. Ссылка: <strong>appleid.apple.com/account</strong>. Что ты будешь делать?",
                    isPhishing: false,
                    explanation: "Это безопасно. Ссылка ведет на официальный поддомен <strong>appleid.apple.com</strong>. Всегда проверяй, что основной домен — это <strong>apple.com</strong>.",
                    type: "choice"
                },
                {
                    title: "Бесплатные v-bucks",
                    text: "Тебе пришло сообщение в Discord от 'Fortnite' с предложением получить бесплатные v-bucks. Ссылка: <strong>fortnite-free.net</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Настоящий сайт Fortnite — <strong>fortnite.com</strong> или <strong>epicgames.com</strong>. Бесплатные v-bucks — это уловка.",
                    type: "choice"
                },
                {
                    title: "Сообщение от банка",
                    text: "Ты получаешь СМС от 'Твой банк' о том, что твой счёт заблокирован. Ссылка: <strong>yourbank-security.net/verify-account</strong>. Но ты знаешь, что у тебя нет счёта. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Это фишинг. Если у тебя нет счёта в банке, то это мошенники. Они пытаются получить твои данные.",
                    type: "choice"
                },
                {
                    title: "Подозрительное окно",
                    text: "Ты видишь всплывающее окно на сайте, которое говорит: 'Поздравляем! Ты выиграл 1000 монет! Введи свои данные, чтобы получить приз!'. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Это фишинг. Мошенники используют такие окна, чтобы получить твои данные. Настоящие призы так не раздают.",
                    type: "popup",
                    popupTitle: "Поздравляем!",
                    popupText: "Ты выиграл 1000 монет! Введи свои данные, чтобы получить приз."
                },
                {
                    title: "Сообщение от друга",
                    text: "Тебе пришло сообщение от друга с просьбой скинуть ему свой пароль от аккаунта, чтобы 'посмотреть что-то'. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Ни в коем случае не сообщай свой пароль даже самым близким друзьям. Их аккаунты могли взломать.",
                    type: "choice"
                },
                {
                    title: "Фальшивый сайт",
                    text: "Тебе пришло сообщение от 'YouTube' с просьбой обновить настройки. Ссылка: <strong>youtube-support.com/update</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Настоящий сайт YouTube — <strong>youtube.com</strong>. Любые другие домены — это подделка.",
                    type: "choice"
                },
                {
                    title: "Поддельный 'Discord'",
                    text: "Тебе пришло сообщение от 'Discord' о том, что ты можешь получить бесплатную подписку 'Nitro'. Ссылка: <strong>discord-nitro-gift.com</strong>. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Фишинг! Настоящий сайт Discord — <strong>discord.com</strong>. Не переходи по ссылкам с подозрительными доменами.",
                    type: "choice"
                },
                {
                    title: "Обновление браузера",
                    text: "Ты видишь всплывающее окно на сайте, которое просит тебя скачать 'новое обновление браузера'. Что ты будешь делать?",
                    isPhishing: true,
                    explanation: "Это фишинг. Никогда не скачивай обновления из всплывающих окон. Обновления браузера устанавливаются автоматически.",
                    type: "popup",
                    popupTitle: "Обнови браузер!",
                    popupText: "Твоя версия браузера устарела. Скачай новое обновление сейчас."
                }
            ];
            // --- HTML Elements ---
            const startScreen = document.getElementById('start-screen');
            const gameScreen = document.getElementById('game-screen');
            const feedbackScreen = document.getElementById('feedback-screen');
            const resultsScreen = document.getElementById('results-screen');
            const popupModal = document.getElementById('popup-modal');

            const startBtn = document.getElementById('start-btn');
            const nextBtn = document.getElementById('next-btn');
            const restartBtn = document.getElementById('restart-btn');
            const okBtn = document.getElementById('ok-btn');
            const cancelBtn = document.getElementById('cancel-btn');
            
            const progressText = document.getElementById('progress-text');
            const scoreText = document.getElementById('score-text');
            const scenarioTitle = document.getElementById('scenario-title');
            const scenarioText = document.getElementById('scenario-text');
            const choicesContainer = document.getElementById('choices-container');
            
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackExplanation = document.getElementById('feedback-explanation');
            const feedbackIcon = document.getElementById('feedback-icon');

            const finalScore = document.getElementById('final-score');
            const resultsMessage = document.getElementById('results-message');

            const popupTitle = document.getElementById('popup-title');
            const popupText = document.getElementById('popup-text');
            const popupChoices = document.getElementById('popup-choices');
            
            // --- Game State ---
            let currentScenarioIndex = 0;
            let score = 0;
            const totalScenarios = scenarios.length;

            // --- Functions ---
            function showScreen(screen) {
                const allScreens = [startScreen, gameScreen, feedbackScreen, resultsScreen];
                allScreens.forEach(s => s.classList.add('hidden'));
                screen.classList.remove('hidden');
                popupModal.classList.remove('active');
            }

            function startGame() {
                currentScenarioIndex = 0;
                score = 0;
                renderScenario();
            }

            function renderScenario() {
                if (currentScenarioIndex >= totalScenarios) {
                    showResults();
                    return;
                }

                const scenario = scenarios[currentScenarioIndex];
                
                progressText.textContent = `Сценарий ${currentScenarioIndex + 1}/${totalScenarios}`;
                scoreText.textContent = `Очки: ${score}`;
                scenarioTitle.textContent = scenario.title;
                scenarioText.innerHTML = scenario.text;
                
                choicesContainer.innerHTML = '';
                popupModal.classList.remove('active');
                
                if (scenario.type === 'popup') {
                    choicesContainer.classList.add('hidden');
                    popupModal.classList.add('active');
                    popupTitle.textContent = "Предупреждение!";
                    popupText.textContent = "Ваш компьютер заражен! Чтобы удалить вирусы, установите нашу программу.";
                } else {
                    choicesContainer.classList.remove('hidden');
                    const phishingBtn = document.createElement('button');
                    phishingBtn.textContent = 'Это фишинг';
                    phishingBtn.className = 'bg-indigo-200 text-indigo-800 font-medium py-3 px-6 rounded-lg shadow-md hover:bg-indigo-300 transition-colors duration-200 text-sm md:text-base';
                    phishingBtn.onclick = () => handleChoice(true, scenario.explanation);

                    const safeBtn = document.createElement('button');
                    safeBtn.textContent = 'Это безопасно';
                    safeBtn.className = 'bg-indigo-200 text-indigo-800 font-medium py-3 px-6 rounded-lg shadow-md hover:bg-indigo-300 transition-colors duration-200 text-sm md:text-base';
                    safeBtn.onclick = () => handleChoice(false, scenario.explanation);
                    
                    if (currentScenarioIndex % 2 === 0) {
                        choicesContainer.appendChild(phishingBtn);
                        choicesContainer.appendChild(safeBtn);
                    } else {
                        choicesContainer.appendChild(safeBtn);
                        choicesContainer.appendChild(phishingBtn);
                    }
                }

                showScreen(gameScreen);
            }

            function handleChoice(isUserChoicePhishing, explanation) {
                const scenario = scenarios[currentScenarioIndex];
                const isCorrect = (isUserChoicePhishing === scenario.isPhishing);
                
                if (isCorrect) {
                    score++;
                    feedbackTitle.textContent = "Правильно!";
                    feedbackIcon.textContent = "👍";
                } else {
                    feedbackTitle.textContent = "Неправильно!";
                    feedbackIcon.textContent = "👎";
                }
                
                feedbackExplanation.innerHTML = explanation;
                showScreen(feedbackScreen);
            }

            function nextScenario() {
                currentScenarioIndex++;
                renderScenario();
            }

            function showResults() {
                finalScore.textContent = `Твой результат: ${score} из ${totalScenarios}`;
                let message = "";
                if (score > totalScenarios * 0.8) {
                    message = "Отличная работа! Ты настоящий эксперт по безопасности в интернете.";
                } else if (score > totalScenarios * 0.5) {
                    message = "Хороший результат! Ты знаешь, как быть в безопасности, но еще есть, что улучшить.";
                } else {
                    message = "Не расстраивайся! Продолжай учиться, и ты станешь более защищенным.";
                }
                resultsMessage.textContent = message;
                showScreen(resultsScreen);
            }

            // --- Event Listeners ---
            startBtn.addEventListener('click', startGame);
            nextBtn.addEventListener('click', nextScenario);
            restartBtn.addEventListener('click', startGame);

            okBtn.addEventListener('click', () => {
                const explanation = scenarios[currentScenarioIndex].explanation;
                handleChoice(false, explanation);
            });

            cancelBtn.addEventListener('click', () => {
                const explanation = scenarios[currentScenarioIndex].explanation;
                handleChoice(true, explanation);
            });
        });
    </script>
</body>
</html>
